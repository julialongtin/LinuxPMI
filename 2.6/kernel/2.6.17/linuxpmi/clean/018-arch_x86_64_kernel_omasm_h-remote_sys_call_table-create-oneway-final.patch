Index: linux/arch/x86_64/kernel/omasm.h
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ linux/arch/x86_64/kernel/omasm.h	2006-09-28 15:02:17.000000000 +0200
@@ -0,0 +1,263 @@
+.data
+
+ENTRY(remote_sys_call_table)
+	.quad om_sys_remote		/* 0 sys_read */
+	.quad om_sys_remote		/* 1 sys_write */
+	.quad om_sys_remote		/* 2 sys_open */
+	.quad om_sys_remote		/* 3 sys_close */
+	.quad om_sys_remote		/* 4 sys_newstat */
+	.quad om_sys_remote		/* 5 sys_newfstat */
+	.quad om_sys_remote		/* 6 sys_newlstat */
+	.quad om_sys_remote		/* 7 sys_poll */
+	.quad om_sys_remote		/* 8 sys_lseek */
+	.quad sys_mmap			/* 9 sys_mmap */
+	.quad om_sys_local		/* 10 sys_mprotect */
+	.quad om_sys_local		/* 11 sys_munmap */
+	.quad om_sys_local		/* 12 sys_brk */
+	.quad om_sys_local		/* 13 sys_rt_sigaction */
+	.quad om_sys_local		/* 14 sys_rt_sigprocmask */
+	.quad stub_rt_sigreturn		/* 15 stub_rt_sigreturn */
+	.quad om_sys_remote		/* 16 sys_ioctl */
+	.quad om_sys_remote		/* 17 sys_pread64 */
+	.quad om_sys_remote		/* 18 sys_pwrite64 */
+	.quad om_sys_remote		/* 19 sys_readv */
+	.quad om_sys_remote		/* 20 sys_writev */
+	.quad om_sys_remote		/* 21 sys_access */
+	.quad om_sys_remote		/* 22 sys_pipe */
+	.quad om_sys_remote		/* 23 sys_select */
+	.quad om_sys_remote		/* 24 sys_sched_yield */
+	.quad om_sys_local		/* 25 sys_mremap */
+	.quad om_sys_local		/* 26 sys_msync */
+	.quad om_sys_local		/* 27 sys_mincore */
+	.quad om_sys_local		/* 28 sys_madvise */
+	.quad om_sys_remote		/* 29 sys_shmget */
+	.quad om_sys_remote		/* 30 wrap_sys_shmat */
+	.quad om_sys_remote		/* 31 sys_shmctl */
+	.quad om_sys_remote		/* 32 sys_dup */
+	.quad om_sys_remote		/* 33 sys_dup2 */
+	.quad om_sys_local		/* 34 sys_pause */
+	.quad om_sys_local		/* 35 sys_nanosleep */
+	.quad om_sys_remote		/* 36 sys_getitimer */
+	.quad om_sys_remote		/* 37 sys_alarm */
+	.quad om_sys_remote		/* 38 sys_setitimer */
+	.quad om_sys_getpid		/* 39 sys_getpid */
+	.quad om_sys_remote		/* 40 sys_sendfile64 */
+	.quad om_sys_remote		/* 41 sys_socket */
+	.quad om_sys_remote		/* 42 sys_connect */
+	.quad om_sys_remote		/* 43 sys_accept */
+	.quad om_sys_remote		/* 44 sys_sendto */
+	.quad om_sys_remote		/* 45 sys_recvfrom */
+	.quad om_sys_remote		/* 46 sys_sendmsg */
+	.quad om_sys_remote		/* 47 sys_recvmsg */
+	.quad om_sys_remote		/* 48 sys_shutdown */
+	.quad om_sys_remote		/* 49 sys_bind */
+	.quad om_sys_remote		/* 50 sys_listen */
+	.quad om_sys_remote		/* 51 sys_getsockname */
+	.quad om_sys_remote		/* 52 sys_getpeername */
+	.quad om_sys_remote		/* 53 sys_socketpair */
+	.quad om_sys_remote		/* 54 sys_setsockopt */
+	.quad om_sys_remote		/* 55 sys_getsockopt */
+	.quad om_stub_clone		/* 56 stub_clone */
+	.quad om_stub_fork		/* 57 stub_fork */
+	.quad om_stub_vfork		/* 58 stub_vfork */
+	.quad om_stub_execve		/* 59 stub_execve */
+	.quad om_sys_remote		/* 60 sys_exit */
+	.quad om_sys_remote		/* 61 sys_wait4 */
+	.quad om_sys_remote		/* 62 sys_kill */
+	.quad om_sys_remote		/* 63 sys_uname */
+	.quad om_sys_remote		/* 64 sys_semget */
+	.quad om_sys_remote		/* 65 sys_semop */
+	.quad om_sys_remote		/* 66 sys_semctl */
+	.quad om_sys_remote		/* 67 sys_shmdt */
+	.quad om_sys_remote		/* 68 sys_msgget */
+	.quad om_sys_remote		/* 69 sys_msgsnd */
+	.quad om_sys_remote		/* 70 sys_msgrcv */
+	.quad om_sys_remote		/* 71 sys_msgctl */
+	.quad om_sys_remote		/* 72 sys_fcntl */
+	.quad om_sys_remote		/* 73 sys_flock */
+	.quad om_sys_remote		/* 74 sys_fsync */
+	.quad om_sys_remote		/* 75 sys_fdatasync */
+	.quad om_sys_remote		/* 76 sys_truncate */
+	.quad om_sys_remote		/* 77 sys_ftruncate */
+	.quad om_sys_remote		/* 78 sys_getdents */
+	.quad om_sys_remote		/* 79 sys_getcwd */
+	.quad om_sys_remote		/* 80 sys_chdir */
+	.quad om_sys_remote		/* 81 sys_fchdir */
+	.quad om_sys_remote		/* 82 sys_rename */
+	.quad om_sys_remote		/* 83 sys_mkdir */
+	.quad om_sys_remote		/* 84 sys_rmdir */
+	.quad om_sys_remote		/* 85 sys_creat */
+	.quad om_sys_remote		/* 86 sys_link */
+	.quad om_sys_remote		/* 87 sys_unlink */
+	.quad om_sys_remote		/* 88 sys_symlink */
+	.quad om_sys_remote		/* 89 sys_readlink */
+	.quad om_sys_remote		/* 90 sys_chmod */
+	.quad om_sys_remote		/* 91 sys_fchmod */
+	.quad om_sys_remote		/* 92 sys_chown */
+	.quad om_sys_remote		/* 93 sys_fchown */
+	.quad om_sys_remote		/* 94 sys_lchown */
+	.quad om_sys_remote		/* 95 sys_umask */
+	.quad om_sys_remote		/* 96 sys_gettimeofday */
+	.quad om_sys_remote		/* 97 sys_getrlimit */
+	.quad om_sys_remote		/* 98 sys_getrusage */
+	.quad om_sys_remote		/* 99 sys_sysinfo */
+	.quad om_sys_remote		/* 100 sys_times */
+	.quad om_sys_remote		/* 101 sys_ptrace */
+	.quad om_sys_remote		/* 102 sys_getuid */
+	.quad om_sys_remote		/* 103 sys_syslog */
+	.quad om_sys_remote		/* 104 sys_getgid */
+	.quad om_sys_remote		/* 105 sys_setuid */
+	.quad om_sys_remote		/* 106 sys_setgid */
+	.quad om_sys_remote		/* 107 sys_geteuid */
+	.quad om_sys_remote		/* 108 sys_getegid */
+	.quad om_sys_remote		/* 109 sys_setpgid */
+	.quad om_sys_remote		/* 110 sys_getppid */
+	.quad om_sys_remote		/* 111 sys_getpgrp */
+	.quad om_sys_remote		/* 112 sys_setsid */
+	.quad om_sys_remote		/* 113 sys_setreuid */
+	.quad om_sys_remote		/* 114 sys_setregid */
+	.quad om_sys_remote		/* 115 sys_getgroups */
+	.quad om_sys_remote		/* 116 sys_setgroups */
+	.quad om_sys_remote		/* 117 sys_setresuid */
+	.quad om_sys_remote		/* 118 sys_getresuid */
+	.quad om_sys_local		/* 119 sys_setresgid */
+	.quad om_sys_local		/* 120 sys_getresgid */
+	.quad om_sys_remote		/* 121 sys_getpgid */
+	.quad om_sys_local		/* 122 sys_setfsuid */
+	.quad om_sys_local		/* 123 sys_setfsgid */
+	.quad om_sys_local		/* 124 sys_getsid */
+	.quad om_sys_remote		/* 125 sys_capget */
+	.quad om_sys_remote		/* 126 sys_capset */
+	.quad om_sys_local		/* 127 sys_rt_sigpending */
+	.quad om_sys_local		/* 128 sys_rt_sigtimedwait */
+	.quad om_sys_local		/* 129 sys_rt_sigqueueinfo */
+	.quad om_stub_rt_sigsuspend	/* 130 stub_rt_sigsuspend */
+	.quad om_stub_sigaltstack	/* 131 stub_sigaltstack */
+	.quad om_sys_remote		/* 132 sys_utime */
+	.quad om_sys_remote		/* 133 sys_mknod */
+	.quad om_sys_remote		/* 134 sys_uselib */
+	.quad om_sys_remote		/* 135 sys_personality */
+	.quad om_sys_remote		/* 136 sys_ustat */
+	.quad om_sys_remote		/* 137 sys_statfs */
+	.quad om_sys_remote		/* 138 sys_fstatfs */
+	.quad om_sys_remote		/* 139 sys_sysfs */
+	.quad om_sys_remote		/* 140 sys_getpriority */
+	.quad om_sys_remote		/* 141 sys_setpriority */
+	.quad om_sys_remote		/* 142 sys_sched_setparam */
+	.quad om_sys_remote		/* 143 sys_sched_getparam */
+	.quad om_sys_remote		/* 144 sys_sched_setscheduler */
+	.quad om_sys_remote		/* 145 sys_sched_getscheduler */
+	.quad om_sys_remote		/* 146 sys_sched_get_priority_max */
+	.quad om_sys_remote		/* 147 sys_sched_get_priority_min */
+	.quad om_sys_remote		/* 148 sys_sched_rr_get_interval */
+	.quad om_sys_remote		/* 149 sys_mlock */
+	.quad om_sys_remote		/* 150 sys_munlock */
+	.quad om_sys_remote		/* 151 sys_mlockall */
+	.quad om_sys_remote		/* 152 sys_munlockall */
+	.quad om_sys_remote		/* 153 sys_vhangup */
+	.quad om_sys_remote		/* 154 sys_modify_ldt */
+	.quad om_sys_remote		/* 155 sys_pivot_root */
+	.quad om_sys_remote		/* 156 sys_sysctl */
+	.quad om_sys_remote		/* 157 sys_prctl */
+	.quad om_sys_remote		/* 158 sys_arch_prctl */
+	.quad om_sys_remote		/* 159 sys_adjtimex */
+	.quad om_sys_remote		/* 160 sys_setrlimit */
+	.quad om_sys_remote		/* 161 sys_chroot */
+	.quad om_sys_remote		/* 162 sys_sync */
+	.quad om_sys_remote		/* 163 sys_acct */
+	.quad om_sys_remote		/* 164 sys_settimeofday */
+	.quad om_sys_remote		/* 165 sys_mount */
+	.quad om_sys_remote		/* 166 sys_umount */
+	.quad om_sys_remote		/* 167 sys_swapon */
+	.quad om_sys_remote		/* 168 sys_swapoff */
+	.quad om_sys_remote		/* 169 sys_reboot */
+	.quad om_sys_remote		/* 170 sys_sethostname */
+	.quad om_sys_remote		/* 171 sys_setdomainname */
+	.quad om_sys_remote		/* 172 stub_iopl */
+	.quad om_sys_remote		/* 173 sys_ioperm */
+	.quad sys_ni_syscall		/* 174 */
+	.quad om_sys_remote		/* 175 sys_init_module */
+	.quad om_sys_remote		/* 176 sys_delete_module */
+	.quad sys_ni_syscall		/* 177 */
+	.quad sys_ni_syscall		/* 178 */
+	.quad om_sys_remote		/* 179 sys_quotactl */
+	.quad om_sys_remote		/* 180 sys_nfsservctl */
+	.quad sys_ni_syscall		/* 181 */
+	.quad sys_ni_syscall		/* 182 */
+	.quad sys_ni_syscall		/* 183 */
+	.quad sys_ni_syscall		/* 184 */
+	.quad sys_ni_syscall		/* 185 */
+	.quad om_sys_gettid		/* 186 sys_gettid */
+	.quad om_sys_remote		/* 187 sys_readahead */
+	.quad om_sys_remote		/* 188 sys_setxattr */
+	.quad om_sys_remote		/* 189 sys_lsetxattr */
+	.quad om_sys_remote		/* 190 sys_fsetxattr */
+	.quad om_sys_remote		/* 191 sys_getxattr */
+	.quad om_sys_remote		/* 192 sys_lgetxattr */
+	.quad om_sys_remote		/* 193 sys_fgetxattr */
+	.quad om_sys_remote		/* 194 sys_listxattr */
+	.quad om_sys_remote		/* 195 sys_llistxattr */
+	.quad om_sys_remote		/* 196 sys_flistxattr */
+	.quad om_sys_remote		/* 197 sys_removexattr */
+	.quad om_sys_remote		/* 198 sys_lremovexattr */
+	.quad om_sys_remote		/* 199 sys_fremovexattr */
+	.quad om_sys_remote		/* 200 sys_tkill */
+	.quad om_sys_remote		/* 201 sys_time64 */
+	.quad om_sys_remote		/* 202 sys_futex */
+	.quad om_sys_remote	 	/* 203 sys_sched_setaffinity */
+	.quad om_sys_remote		/* 204 sys_sched_getaffinity */
+	.quad sys_ni_syscall		/* 205 */
+	.quad om_sys_remote		/* 206 sys_io_setup */
+	.quad om_sys_remote		/* 207 sys_io_destroy */
+	.quad om_sys_remote		/* 208 sys_io_getevents */
+	.quad om_sys_remote		/* 209 sys_io_submit */
+	.quad om_sys_remote		/* 210 sys_io_cancel */
+	.quad sys_ni_syscall		/* 211 */
+	.quad om_sys_remote		/* 212 sys_lookup_dcookie */
+	.quad om_sys_remote		/* 213 sys_epoll_create */
+	.quad sys_ni_syscall		/* 214 */
+	.quad sys_ni_syscall		/* 215 */
+	.quad om_sys_remote		/* 216 sys_remap_file_pages */
+	.quad om_sys_remote		/* 217 sys_getdents64 */
+	.quad om_sys_remote		/* 218 sys_set_tid_address */
+	.quad om_sys_remote		/* 219 sys_restart_syscall */
+	.quad om_sys_remote		/* 220 sys_semtimedop */
+	.quad om_sys_remote		/* 221 sys_fadvise64 */
+	.quad om_sys_remote		/* 222 sys_timer_create */
+	.quad om_sys_remote		/* 223 sys_timer_settime */
+	.quad om_sys_remote		/* 224 sys_timer_gettime */
+	.quad om_sys_remote		/* 225 sys_timer_getoverrun */
+	.quad om_sys_remote		/* 226 sys_timer_delete */
+	.quad om_sys_remote		/* 227 sys_clock_settime */
+	.quad om_sys_remote		/* 228 sys_clock_gettime */
+	.quad om_sys_remote		/* 229 sys_clock_getres */
+	.quad om_sys_remote		/* 230 sys_clock_nanosleep */
+	.quad om_sys_remote		/* 231 sys_exit_group */
+	.quad om_sys_remote		/* 232 sys_epoll_wait */
+	.quad om_sys_remote		/* 233 sys_epoll_ctl */
+	.quad om_sys_remote		/* 234 sys_tgkill */
+	.quad om_sys_remote		/* 235 sys_utimes */
+	.quad sys_ni_syscall		/* 236 */
+	.quad sys_ni_syscall		/* 236 */
+	.quad om_sys_local		/* 237 sys_mbind */
+	.quad om_sys_local		/* 238 sys_set_mempolicy */
+	.quad om_sys_local		/* 239 sys_get_mempolicy */
+	.quad om_sys_remote		/* 240 sys_mq_open */
+	.quad om_sys_remote		/* 241 sys_mq_unlink */
+	.quad om_sys_remote		/* 242 sys_mq_timedsend */
+	.quad om_sys_remote		/* 243 sys_mq_timedreceive */
+	.quad om_sys_remote		/* 244 sys_mq_notify */
+	.quad om_sys_remote		/* 245 sys_mq_getsetattr */
+	.quad om_sys_remote		/* 246 sys_kexec_load */
+	.quad om_sys_remote		/* 247 sys_waitid */
+	.quad om_sys_remote		/* 248 sys_add_key */
+	.quad om_sys_remote		/* 249 sys_request_key */
+	.quad om_sys_remote		/* 250 sys_keyctl */
+	.quad om_sys_remote		/* 251 sys_ioprio_set */
+	.quad om_sys_remote		/* 252 sys_ioprio_get */
+	.quad om_sys_remote		/* 253 sys_inotify_init */
+	.quad om_sys_remote		/* 254 sys_inotify_add_watch */
+	.quad om_sys_remote		/* 255 sys_inotify_rm_watch */
+
+remote_syscall_table_size=(.-remote_sys_call_table)
+.text
